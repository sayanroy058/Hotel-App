{% extends "base.html" %}

{% block title %}Edit Hotel - Admin{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <h2><i class="fas fa-edit"></i> Edit Hotel: {{ hotel[1] }}</h2>
        <p class="text-muted">Update hotel information and owner details</p>
    </div>
</div>

<div class="row">
    <div class="col-lg-8">
        <form method="POST">
            <div class="card">
                <div class="card-header">
                    <h5><i class="fas fa-building"></i> Hotel Information</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="hotel_name" class="form-label">Hotel Name *</label>
                                <input type="text" class="form-control" id="hotel_name" name="hotel_name" 
                                       value="{{ hotel[1] }}" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="hotel_phone" class="form-label">Hotel Phone</label>
                                <input type="tel" class="form-control" id="hotel_phone" name="hotel_phone" 
                                       value="{{ hotel[3] or '' }}">
                            </div>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="hotel_address" class="form-label">Hotel Address *</label>
                        <textarea class="form-control" id="hotel_address" name="hotel_address" rows="3" required>{{ hotel[2] }}</textarea>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="hotel_email" class="form-label">Hotel Email</label>
                                <input type="email" class="form-control" id="hotel_email" name="hotel_email" 
                                       value="{{ hotel[4] or '' }}">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="telegram_number" class="form-label">Telegram Number</label>
                                <input type="text" class="form-control" id="telegram_number" name="telegram_number" 
                                       value="{{ hotel[5] or '' }}" placeholder="For Telegram Bot Integration">
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="telegram_bot_token" class="form-label">Telegram Bot Token</label>
                                <input type="text" class="form-control" id="telegram_bot_token" name="telegram_bot_token" 
                                       value="{{ hotel[6] or '8065221659:AAE_nWRSZWtKU09tRacOPvU3xNd80FgXGXE' }}" placeholder="Bot token from BotFather">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="telegram_chat_id" class="form-label">Telegram Chat ID</label>
                                <input type="text" class="form-control" id="telegram_chat_id" name="telegram_chat_id" 
                                       value="{{ hotel[12] or '' }}" placeholder="Chat ID for notifications">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card mt-4">
                <div class="card-header">
                    <h5><i class="fas fa-user-tie"></i> Hotel Owner Information</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="owner_name" class="form-label">Owner Full Name *</label>
                                <input type="text" class="form-control" id="owner_name" name="owner_name" 
                                       value="{{ hotel[7] }}" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label for="owner_phone" class="form-label">Owner Phone</label>
                                <input type="tel" class="form-control" id="owner_phone" name="owner_phone" 
                                       value="{{ hotel[9] or '' }}">
                            </div>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="owner_email" class="form-label">Owner Email *</label>
                        <input type="email" class="form-control" id="owner_email" name="owner_email" 
                               value="{{ hotel[8] }}" required>
                    </div>
                </div>
            </div>
            
            <div class="mt-4">
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save"></i> Update Hotel
                </button>
                <a href="{{ url_for('view_hotel', hotel_id=hotel[0]) }}" class="btn btn-secondary">
                    <i class="fas fa-times"></i> Cancel
                </a>
            </div>
        </form>
    </div>
    
    <div class="col-lg-4">
        <div class="card">
            <div class="card-header">
                <h5><i class="fas fa-info-circle"></i> Hotel Details</h5>
            </div>
            <div class="card-body">
                <p><strong>Hotel ID:</strong> {{ hotel[0] }}</p>
                <p><strong>Created:</strong> {{ hotel[10][:10] if hotel[10] else 'N/A' }}</p>
                <p><strong>Status:</strong> 
                    {% if hotel[11] %}
                        <span class="badge bg-success">Active</span>
                    {% else %}
                        <span class="badge bg-secondary">Inactive</span>
                    {% endif %}
                </p>
                
                <hr>
                
                <h6>Quick Actions</h6>
                <div class="d-grid gap-2">
                    <a href="{{ url_for('view_hotel', hotel_id=hotel[0]) }}" class="btn btn-outline-primary btn-sm">
                        <i class="fas fa-eye"></i> View Details
                    </a>
                    <a href="{{ url_for('admin_hotels') }}" class="btn btn-outline-secondary btn-sm">
                        <i class="fas fa-list"></i> Back to Hotels
                    </a>
                </div>
            </div>
        </div>
        
        <div class="card mt-3">
            <div class="card-header">
                <h5><i class="fas fa-exclamation-triangle"></i> Important Notes</h5>
            </div>
            <div class="card-body">
                <div class="alert alert-warning alert-sm">
                    <i class="fas fa-info-circle"></i> Changes to owner email will affect their login credentials.
                </div>
                <div class="alert alert-info alert-sm">
                    <i class="fas fa-lightbulb"></i> Telegram integration requires bot token configuration.
                    <br><a href="{{ url_for('telegram_setup') }}" target="_blank" class="btn btn-sm btn-outline-info mt-2">
                        <i class="fab fa-telegram"></i> Setup Guide
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}